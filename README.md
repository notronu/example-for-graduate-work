README.md

Описание проекта

Данный проект является серверным приложением на основе фреймворка Spring Boot, предназначенным для управления объявлениями, пользователями, а также комментариями к объявлениям. Приложение реализует авторизацию и аутентификацию с использованием Spring Security, хранение данных в базе данных через JPA, а также предоставляет API для работы с данными.

Основные функции

1. Управление пользователями:
 - Регистрация новых пользователей. 
 - Аутентификация пользователей через логин и пароль. 
 - Обновление данных пользователя (пароль, контактные данные, изображение профиля).

2. Управление объявлениями:

 - Создание, редактирование, удаление объявлений. 
 - Загрузка изображений для объявлений. 
 - Получение списка всех объявлений или объявлений конкретного пользователя.

3. Управление комментариями:

 - Добавление комментариев к объявлениям.
 - Редактирование и удаление комментариев.
 - Получение списка комментариев к объявлениям.

4. Spring Security:

 - Защита эндпоинтов с использованием авторизационных правил.
 - Разделение ролей пользователей (USER, ADMIN).
 - Настройка прав доступа для управления ресурсами.

Основные компоненты
1. Конфигурация безопасности

 - WebSecurityConfig.java: Конфигурация безопасности, включая настройку CORS, CSRF и прав доступа к различным ресурсам.
 - MyUserDetailsService.java: Сервис для загрузки пользовательских данных по email для аутентификации.
 - MyUserDetails.java: Кастомная реализация UserDetails для интеграции с Spring Security.

2. Контроллеры

 - AdsController.java: Контроллер для управления объявлениями.
 - CommentController.java: Контроллер для работы с комментариями к объявлениям.
 - UserController.java: Контроллер для управления пользователями, включая операции регистрации и аутентификации.

3. Сервисный слой

 - AdsServiceImpl.java: Реализация сервиса для работы с объявлениями.
 - CommentServiceImpl.java: Реализация сервиса для работы с комментариями.
 - UserServiceImpl.java: Реализация сервиса для управления пользователями.
 - AuthServiceImpl.java: Реализация сервиса для аутентификации пользователей.

4. DTO. Используются объекты DTO для передачи данных между клиентом и сервером:

 - Ad.java, CreateOrUpdateAd.java, ExtendedAd.java: DTO для работы с объявлениями.
 - Comment.java, CreateOrUpdateComment.java: DTO для работы с комментариями.
 - Register.java, NewPassword.java, UpdateUser.java: DTO для управления пользователями и их регистрацией.
5. Исключения

 - NotFoundException.java: Исключение для обработки ошибок, связанных с отсутствием ресурса.
 - AdNotFoundException.java: Исключение для обработки ошибок, связанных с отсутствием объявления.
 - PasswordIsNotCorrectException.java: Исключение для обработки ошибок при неправильном вводе текущего пароля.
 - UserAlreadyRegisteredException.java: Исключение для обработки ошибок при попытке регистрации уже существующего пользователя.
   

Запуск проекта

1. Клонируйте проект:
   git clone <URL репозитория>
2. Установите необходимые зависимости с помощью Maven:
   mvn install
3. Запустите приложение:
   mvn spring-boot:run
4. Приложение будет доступно по адресу: http://localhost:8080.


Тестирование API

Для работы с API используется Swagger, доступный по пути:

    http://localhost:8080/swagger-ui/


Требования

 - Java 11+
 - Maven 3.6+
 - PostgreSQL
 - Docker


В проекте использовался следующий стек технологий:

1. Backend:

- Java 17 — основной язык программирования для серверной части.
- Spring Boot — фреймворк для создания веб-приложений на Java.
  - Spring Security — модуль для аутентификации и авторизации. 
  - Spring Data JPA — модуль для работы с базой данных с использованием JPA (Java Persistence API). 
  - Spring Web — модуль для создания REST API. 
  - Spring Validation — модуль для валидации входных данных. 
  - Spring OpenAPI — для генерации документации API через Swagger. 
- Maven — система управления зависимостями и сборки проекта.


2. База данных:

- PostgreSQL — реляционная база данных для хранения данных пользователей, объявлений и комментариев.
- JPA (Hibernate) — ORM (Object Relational Mapping) для взаимодействия с базой данных через Java объекты.


3. Документация и тестирование API:

- Swagger/OpenAPI — инструмент для автоматической генерации документации к REST API.


4. Безопасность:

- JWT (JSON Web Tokens) — для аутентификации пользователей.
- BCrypt — для хеширования паролей пользователей.


5. Файловая система:

- Использование локальной файловой системы для хранения изображений, загружаемых пользователями (аватары и изображения объявлений).


Авторы

Проект разработан командой разработчиков "Под кружку чая"

 - Александр Мочалов
 - Алексей Мостолыгин